<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>My Books</title>



    <link rel="stylesheet" href="https://d10ajoocuyu32n.cloudfront.net/mobile/1.3.1/jquery.mobile-1.3.1.min.css">

    <!-- Extra Codiqa features -->
    <link rel="stylesheet" href="codiqa.ext.css">

    <link rel="stylesheet" href="https://codiqa.com/view/e8c2e845/css">

    <!-- jQuery and jQuery Mobile -->
    <script src="https://d10ajoocuyu32n.cloudfront.net/jquery-1.9.1.min.js"></script>
    <script src="https://d10ajoocuyu32n.cloudfront.net/mobile/1.3.1/jquery.mobile-1.3.1.min.js"></script>

    <!-- Extra Codiqa features -->
    <script src="https://d10ajoocuyu32n.cloudfront.net/codiqa.ext.js"></script>

    <script src="https://codiqa.com/view/e8c2e845/js"></script>

    <script src="https://apigee.com/usergrid/sdk/usergrid.0.10.5.js"></script>
    <script type="text/javascript">

        //https://github.com/timanglade/training/blob/gh-pages/02-read.html
        //https://raw.github.com/timanglade/training/gh-pages/02-read.html
        var apigee = new Usergrid.Client({
            orgName:'theappchick',
            appName:'sandbox'
        });


        // A Collection object that will be used to hold the list of books locally
        var my_books = new Usergrid.Collection( { "client":apigee, "type":"books" } );

        //http://api.usergrid.com/theappchick/sandbox/books
        // Actual network call
        my_books.fetch(

                // Success Callback
                function () {
                    $('#books-list').empty();

                    while ( my_books.hasNextEntity() ) {
                        var current_book = my_books.getNextEntity();

                        // Output the book on the page
                        $('#books-list').append('<li><h3>'+current_book.get('Title')+'</h3><p>'+current_book.get('AUTHOR')+'</p></li>');
                    }

                    // Re-apply jQuery Mobile styles
                    $('#books-list').listview('refresh');
                },

                // Failure Callback
                function () { alert("read failed"); }
        );


    </script>

</head>
<body>
<div data-role="page" data-control-title="Home" id="page1">
    <div data-theme="b" data-role="header">
        <a data-role="button" data-theme="b" href="#addBook" data-icon="plus"
           data-iconpos="right" class="ui-btn-right">
            Add
        </a>
        <h4>
            My Books
        </h4>
    </div>
    <div data-role="content">
        <ul id="books-list"  data-role="listview" data-inset="false" >
            <li>
                <h3>First Title</h3>
                <p>First author</p>
            </li>
            <li>
                <h3>Second Title</h3>
                <p>Second author</p>
            </li>
        </ul>
    </div>
</div>

<div data-role="page" data-control-title="Add Book" id="addBook">
    <div data-theme="b" data-role="header">
        <h3>
            Add a New Book
        </h3>
    </div>
    <div data-role="content">
        <div data-role="fieldcontain" data-controltype="textinput">
            <label for="textinput1">
                Title
            </label>
            <input name="" id="textinput1" placeholder="" value="" type="text">
        </div>
        <div data-role="fieldcontain" data-controltype="textinput">
            <label for="textinput2">
                Author
            </label>
            <input name="" id="textinput2" placeholder="" value="" type="text">
        </div>
        <a data-role="button" data-inline="true" data-rel="back" href="#addBook">
            Cancel
        </a>
        <a data-role="button" data-inline="true" data-theme="b" href="#addBook">
            Create
        </a>
    </div>
</div>
</body>
</html>